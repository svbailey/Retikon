# V3.0 Sprint 07 - Streaming ingestion + queue dispatch (Pro)

Dates: TBD
Owner: TBD

## Goal
Pro streaming ingestion with queue-based dispatch.

## Scope checklist
- [x] Add queue abstraction in retikon_core/queue/.
- [x] Implement Pub/Sub adapter in gcp_adapter/queue_pubsub.py.
- [x] Add streaming ingestion pipeline in retikon_core/ingestion/streaming.py.
- [x] Add streaming Cloud Run service entrypoint gcp_adapter/stream_ingest_service.py.
- [x] Update Terraform to add service + Pub/Sub topics in infrastructure/terraform/.
- [x] Add DLQ config and retry policies.

## Primary paths
- `retikon_core/queue/`
- `gcp_adapter/queue_pubsub.py`
- `retikon_core/ingestion/streaming.py`
- `gcp_adapter/stream_ingest_service.py`
- `infrastructure/terraform/`

## Tests and validation
- [x] `python -m pytest -q` (65 passed, 7 warnings)
- [x] Stream ingest smoke test (dev): `/health`, `/ingest/stream/status`, `/ingest/stream` + backlog flush

## Deliverables
- [x] Streaming ingestion service deployed in GCP

## Risks / Dependencies
- [ ] TBD

## Notes
- Smoke test notes (dev): `/health` ok; `/ingest/stream/status` ok; `/ingest/stream` accepted and backlog drains to 0 within ~2s (flush loop); `/ingest/stream/push` returns `skipped=1` when `INGESTION_DRY_RUN=1` (expected in dev).
