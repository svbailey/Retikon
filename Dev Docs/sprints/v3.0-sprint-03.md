# V3.0 Sprint 03 - Local query + search

Dates: TBD
Owner: TBD

## Goal
Local query works with additive schema evolution and search across modalities.

## Scope checklist
- [x] Update retikon_core/query_engine/query_runner.py to support local file paths.
- [x] Ensure all DuckDB reads use union_by_name=true for schema evolution.
- [x] Add local snapshot support in retikon_core/query_engine/index_builder.py.
- [x] Update retikon_core/storage/schemas.py to merge schema versions cleanly.
- [x] Add metadata and keyword search support in retikon_core/query_engine/.
- [x] Add query mode/modality filtering to skip unused embeddings.
- [x] Add model warmup hooks for query services (local + hosted).
- [x] Add slow-query timing breakdown logging for embeddings vs DuckDB.

## Primary paths
- `retikon_core/query_engine/query_runner.py`
- `retikon_core/query_engine/index_builder.py`
- `retikon_core/storage/schemas.py`
- `retikon_core/query_engine/`

## Tests and validation
- [x] `tests/test_query_runner.py`
- [x] `tests/test_graphar_schemas.py`
- [x] `tests/test_query_modes.py`

## Deliverables
- [x] Local query returns text/image/audio results against local GraphAr

## Risks / Dependencies
- [ ] TBD

## Notes
-
