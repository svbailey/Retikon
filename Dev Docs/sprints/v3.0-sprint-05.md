# V3.0 Sprint 05 - SDKs + minimal web console

Dates: TBD
Owner: TBD

## Goal
Complete developer experience for Core.

## Scope checklist
- [x] Add SDKs: sdk/python/ and sdk/js/ with ingest/query support.
- [x] Add OpenAPI spec: Dev Docs/openapi/retikon-core.yaml.
- [x] Update frontend/dev-console/ for local mode base URL.
- [x] Add minimal UI panels: ingest status, media preview, query runner, logs.
- [x] Wire console API calls to local services.
- [x] Update frontend/dev-console/README.md and .env.example.
- [x] Add optional OCR plugin packaging (extra deps + build target) and ENABLE_OCR flag documentation.
- [x] Expose query mode/modality options in SDKs, CLI, and OpenAPI.
- [x] Add console toggle for text-only vs multimodal queries and persist defaults.

## Primary paths
- `sdk/python/`
- `sdk/js/`
- `Dev Docs/openapi/retikon-core.yaml`
- `frontend/dev-console/`

## Tests and validation
- [x] `Frontend smoke tests (if configured)`

## Deliverables
- [x] Core console working against local APIs
- [x] SDKs published and documented

## Risks / Dependencies
- [ ] TBD

## Notes
- Tests: `pytest -q` and `npm run build` (frontend/dev-console).
- Manual smoke: start local ingest/query, ingest sample.csv, build snapshot, query text, and load console dev server.

## Task breakdown
1) OpenAPI + contracts
- Draft `Dev Docs/openapi/retikon-core.yaml` covering:
  - `POST /ingest` (local ingestion)
  - `POST /query` and `POST /admin/reload-snapshot`
  - `GET /health`
- Include request/response schemas for:
  - Query modes (`mode`, `modalities`, `search_type`, `metadata_filters`)
  - Errors (400/401/413/500)
- Confirm parity with `local_adapter/query_service.py` and `local_adapter/ingestion_service.py`.

2) SDKs
- Python SDK in `sdk/python/`:
  - client class with `ingest()`, `query()`, `health()`, `reload_snapshot()`.
  - support `mode`, `modalities`, `search_type`, `metadata_filters`.
  - README with local usage examples.
- JS/TS SDK in `sdk/js/`:
  - fetch-based client with typed responses.
  - README with local usage examples.

3) Dev console (local mode)
- Update `frontend/dev-console/src/App.tsx` to support:
  - local ingestion + local query without `dev` endpoints.
  - “local mode” indicator and reduced UI when dev endpoints are missing.
  - text-only vs multimodal toggle (persist in local storage).
- Update `frontend/dev-console/README.md` and `.env.example` with:
  - local defaults (ingest/query URLs) and how to switch.

4) OCR optional packaging
- Add OCR plugin documentation:
  - how to enable `ENABLE_OCR=1`
  - optional dependency install via `requirements-ocr.txt`.
- Ensure console shows OCR status toggle note.

5) Validation
- Run frontend smoke test checklist (manual steps if no automation).

## Acceptance criteria
- Local console can ingest and query with only local services running.
- SDKs can run example scripts against local services.
- OpenAPI spec matches implementation and is referenced in docs.
