# V3.1 Sprint 01 - Enterprise identity and RBAC/ABAC core

Dates: TBD
Owner: TBD

## Goal
Build identity and access-control foundations for Pro Enterprise.

## Scope checklist (Core)
- [x] Add identity provider config scaffolding: `retikon_core/auth/idp.py`.
- [x] Implement RBAC roles and permission bundles: `retikon_core/auth/rbac.py`.
- [x] Add ABAC policy evaluation engine: `retikon_core/auth/abac.py`.
- [x] Add audit log schema (additive) in `retikon_core/schemas/graphar/`.

## Scope checklist (Pro)
- [x] Extend API auth middleware in `gcp_adapter/query_service.py` and
      `gcp_adapter/ingestion_service.py`.

## Primary paths (Core)
- `retikon_core/auth/idp.py`
- `retikon_core/auth/rbac.py`
- `retikon_core/auth/abac.py`
- `retikon_core/schemas/graphar/`

## Primary paths (Pro)
- `gcp_adapter/query_service.py`
- `gcp_adapter/ingestion_service.py`

## Tests and validation
- [x] Core: `tests/core/test_auth_rbac.py`
- [x] Core: `tests/core/test_auth_abac.py`
- [x] Pro: `tests/pro/test_auth_middleware.py` (new)

## Deliverables
- [x] Role- and policy-based access enforced in Pro API layer

## Risks / Dependencies
- [x] None recorded.

## Notes
-

## Sprint 1 Kickoff Checklist
- [x] N/A (not tracked retroactively) — Confirm sprint dates and owner.
- [x] N/A (not tracked retroactively) — Validate Core/Pro boundary notes for Sprint 1 tasks.
- [x] N/A (not tracked retroactively) — Create task tickets for Core auth modules and Pro middleware updates.
- [x] N/A (not tracked retroactively) — Define test plan and owners for new Core/Pro tests.
- [x] N/A (not tracked retroactively) — Align on GraphAr schema changes (additive) and review approval.
- [x] N/A (not tracked retroactively) — Establish demo acceptance criteria for RBAC/ABAC enforcement.
