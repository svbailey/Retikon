project_id                       = "simitor"
region                           = "us-central1"
env                              = "staging"
vpc_connector_name               = "retikon-vpc"
raw_bucket_name                  = "retikon-raw-simitor-staging"
graph_bucket_name                = "retikon-graph-simitor-staging"
graph_prefix                    = "retikon_v2_demo_20260209_clean"
graph_lifecycle_ttl_days        = 7
graph_lifecycle_prefixes        = ["retikon_v2_demo_"]
artifact_repo_name               = "retikon-repo"
firestore_location               = "nam5"
snapshot_uri                     = "gs://retikon-graph-simitor-staging/retikon_v2_demo_20260209_clean/snapshots/retikon.duckdb"
raw_prefix                       = "raw_clean"
auth_gateway_userinfo            = true
auth_issuer                      = "https://securetoken.google.com/simitor"
auth_audience                    = "simitor"
auth_jwks_uri                    = "https://www.googleapis.com/service_accounts/v1/metadata/x509/securetoken@system.gserviceaccount.com"
auth_admin_roles                 = "admin"
auth_admin_groups                = "admins"
auth_required_claims             = "sub,iss,aud,exp,iat,org_id"
dev_console_auth_required_claims = "sub,iss,aud,exp,iat"
cors_allow_origins               = "https://retikon-dev-console-staging-423745254982.us-central1.run.app,https://retikon-dev-console-staging-yt27ougp4q-uc.a.run.app,https://retikon-dev-console-simitor-dev.storage.googleapis.com,https://storage.googleapis.com"
dev_console_cors_allow_origins   = "https://retikon-dev-console-staging-423745254982.us-central1.run.app,https://retikon-dev-console-staging-yt27ougp4q-uc.a.run.app,https://retikon-dev-console-simitor-dev.storage.googleapis.com,https://storage.googleapis.com"
allow_browser_direct_access      = true
default_org_id                   = "simitor"
default_site_id                  = ""
default_stream_id                = ""
control_plane_store              = "firestore"
control_plane_collection_prefix  = "staging_"
control_plane_read_mode          = "primary"
control_plane_write_mode         = "single"
control_plane_fallback_on_empty  = false
metering_enabled                 = true
metering_firestore_enabled       = true
metering_collection_prefix       = "staging_"
enable_api_gateway               = true
duckdb_skip_healthcheck          = false
duckdb_gcs_fallback              = false
duckdb_auth_provider             = "gcp_adapter.duckdb_auth:GcsDuckDBAuthProvider"
index_builder_work_dir           = "/tmp"
index_builder_copy_local         = false
index_builder_fallback_local     = true
index_builder_skip_if_unchanged  = true
index_builder_use_latest_compaction = true
index_builder_skip_missing_files = true
index_builder_incremental        = true
index_builder_incremental_max_new_manifests = 200
index_builder_min_new_manifests  = 25
index_builder_reload_snapshot    = true
index_builder_signed_url_ttl_sec = 3600
index_cpu                       = "8000m"
index_memory                    = "32Gi"
index_job_timeout               = "3600s"
index_duckdb_threads            = 8
index_duckdb_memory_limit       = "28GB"
index_duckdb_temp_directory     = "/tmp/duckdb"
max_frames_per_video             = 300
video_thumbnail_width            = 640
image_embed_max_dim              = 1024
video_embed_max_dim              = 640
thumbnail_jpeg_quality           = 80
audio_transcribe                = true
audio_profile                   = false
audio_skip_normalize_if_wav     = true
audio_max_segments              = 0
transcribe_tier                 = "fast"
transcribe_enabled              = true
transcribe_max_ms               = 60000
transcribe_max_ms_by_org        = "simitor=20000"
transcribe_max_ms_by_plan       = ""
transcribe_plan_metadata_keys   = "plan,plan_id,tier"
hnsw_ef_construction            = 100
hnsw_m                          = 16
hnsw_ef_search                  = 64
dedupe_cache_enabled            = true
max_ingest_attempts              = 5
idempotency_ttl_seconds          = 600
idempotency_completed_ttl_seconds = 0
model_inference_timeout_seconds  = 90
model_inference_image_timeout_seconds = 120
video_sample_fps                 = 0.5
video_sample_interval_seconds    = 5
video_scene_threshold            = 0.5
video_scene_min_frames           = 1
compaction_enabled               = false
max_preview_bytes                = 52428800
chunk_target_tokens             = 256
chunk_overlap_tokens            = 50
rate_limit_doc_per_min           = 60
rate_limit_image_per_min         = 60
rate_limit_audio_per_min         = 20
rate_limit_video_per_min         = 10
rate_limit_global_doc_per_min    =  0
rate_limit_global_image_per_min  = 0
rate_limit_global_audio_per_min  = 0
rate_limit_global_video_per_min  = 0
rate_limit_backend               = "redis"
rate_limit_redis_host            = ""
ingestion_concurrency            = 1
ingestion_min_scale              = 0
ingestion_max_scale              = 10
ingestion_cpu                    = "2000m"
ingestion_memory                 = "8Gi"
ingestion_media_concurrency      = 2
ingestion_media_min_scale        = 4
ingestion_media_keep_warm_enabled = true
ingestion_media_autoscale_enabled = true
ingestion_media_max_scale        = 50
ingestion_media_cpu_always_on    = true
ingestion_media_cpu              = "2000m"
ingestion_media_memory           = "4Gi"
ingestion_embed_enabled          = true
ingestion_embed_modalities       = "document,image"
ingestion_embed_concurrency      = 1
ingestion_embed_cpu              = "1000m"
ingestion_embed_memory           = "4Gi"
ingestion_embed_min_scale        = 1
ingestion_embed_keep_warm_enabled = true
ingestion_embed_autoscale_enabled = true
ingestion_embed_max_scale        = 5
ingestion_embed_cpu_always_on    = false
query_concurrency                = 2
query_timeout_seconds            = 120
query_slow_ms                    = 1500
query_log_timings                = true
query_warmup                     = true
query_warmup_text                = "retikon warmup"
query_warmup_steps               = "text,image_text,audio_text"
query_default_modalities         = "document,transcript,image,audio"
query_modality_boosts            = "document=1.0,transcript=1.0,image=1.05,audio=1.05"
query_modality_hint_boost        = 1.15
query_max_scale                  = 40
query_min_scale                  = 1
query_cpu                        = "4000m"
query_memory                     = "8Gi"
audit_concurrency                = 10
audit_timeout_seconds            = 300
audit_max_scale                  = 10
audit_min_scale                  = 0
audit_cpu                        = "1000m"
audit_memory                     = "1Gi"
audit_require_admin              = false
workflow_concurrency             = 10
workflow_timeout_seconds         = 60
workflow_max_scale               = 10
workflow_min_scale               = 0
workflow_cpu                     = "1000m"
workflow_memory                  = "1Gi"
workflow_require_admin           = true
workflow_run_mode                = "queue"
chaos_concurrency                = 10
chaos_timeout_seconds            = 60
chaos_max_scale                  = 5
chaos_min_scale                  = 0
chaos_require_admin              = true
duckdb_threads                   = 4
duckdb_memory_limit              = "4GB"
duckdb_temp_directory            = "/tmp/duckdb"
ingest_warmup                    = true
ingest_warmup_audio              = false
ingest_warmup_text               = true
ingest_media_warmup              = true
ingest_media_warmup_audio        = true
ingest_media_warmup_text         = true
queue_monitor_enabled            = true
queue_monitor_interval_seconds   = 30
queue_monitor_subscriptions      = "audio=retikon-ingest-media-sub-staging,video=retikon-ingest-media-sub-staging"
snapshot_reload_allow_internal_sa = true
dev_console_snapshot_reload_allow_sa = true
dev_console_concurrency          = 10
dev_console_memory               = "2Gi"
dev_console_service_name         = "retikon-dev-console"
dev_console_embedding_backend    = "onnx"
audit_service_name               = "retikon-audit"
workflow_service_name            = "retikon-workflows"
chaos_service_name               = "retikon-chaos"
eventarc_transport_topic_name    = "retikon-ingest-transport-staging"
ingest_dlq_topic_name            = "retikon-ingest-dlq-staging"
ingest_dlq_subscription_name     = "retikon-ingest-dlq-sub-staging"
ingest_media_topic_name          = "retikon-ingest-media-staging"
ingest_media_subscription_name   = "retikon-ingest-media-sub-staging"
ingest_media_max_delivery_attempts = 5
workflow_queue_topic_name        = "retikon-workflow-queue-staging"
workflow_dlq_topic_name          = "retikon-workflow-dlq-staging"
workflow_queue_subscription_name = "retikon-workflow-queue-sub-staging"
workflow_schedule                = "*/5 * * * *"
workflow_schedule_timezone       = "Etc/UTC"
index_schedule_enabled           = true
index_schedule                   = "*/10 * * * *"
index_schedule_timezone          = "Etc/UTC"
ops_run_id                       = "latest"
ops_guardrails_enabled           = true
ops_guardrails_schedule          = "15 3 * * *"
ops_guardrails_schedule_timezone = "Etc/UTC"
ops_guardrails_multiplier        = 2.0
ops_cost_rollup_enabled          = true
ops_cost_rollup_schedule         = "30 3 * * *"
ops_cost_rollup_schedule_timezone = "Etc/UTC"
ops_cost_rollup_index_seconds_per_vector = 0.0
ops_gc_audit_enabled             = true
ops_gc_audit_schedule            = "45 3 * * *"
ops_gc_audit_schedule_timezone   = "Etc/UTC"
alert_notification_channels      = []
alert_notification_emails        = ["svbailey@gmail.com"]
alert_ingest_5xx_rate            = 0.02
alert_query_5xx_rate             = 0.02
alert_query_p95_seconds          = 6.0
alert_ingest_p95_seconds         = 3.0
alert_queue_wait_ms_p95          = 10000
alert_stage_embed_image_ms_p95   = 12000
alert_stage_decode_ms_p95        = 2000
alert_stage_embed_text_ms_p95    = 2000
alert_stage_embed_audio_ms_p95   = 2000
alert_stage_transcribe_ms_p95    = 45000
alert_stage_write_parquet_ms_p95 = 1500
alert_stage_write_manifest_ms_p95 = 500
alert_index_queue_length         = 200
alert_dlq_backlog                = 1
monitoring_dashboard_name        = "Retikon Ops Staging"
billing_account_id               = "017260-C6FFCB-219567"
cost_budget_amount               = 0
cost_budget_currency             = "GBP"
cost_budget_thresholds           = [0.5, 0.75, 0.9, 1.0]

use_real_models    = true
model_dir          = "/app/models"
text_model_name    = "BAAI/bge-base-en-v1.5"
image_model_name   = "openai/clip-vit-base-patch32"
audio_model_name   = "laion/clap-htsat-fused"
text_embed_batch_size  = 64
image_embed_batch_size = 8
text_embed_backend     = "hf"
image_embed_backend    = "hf"
whisper_model_name = "small"
whisper_model_name_fast = "tiny"
whisper_language_default = "en"
whisper_language_auto    = true
whisper_min_confidence   = 0.6
whisper_detect_seconds   = 30
whisper_task             = "transcribe"
whisper_non_english_task = "translate"

ingestion_image             = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-ingest:dev-20260214-115638-p1"
query_image                 = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-query:dev-20260214-144106-p2"
query_embedding_backend     = ""
query_gpu_enabled           = false
query_gpu_region            = "us-east4"
query_gpu_image             = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-query-gpu:dev-20260129-123607-opt2"
query_gpu_cpu               = "4000m"
query_gpu_memory            = "16Gi"
query_gpu_concurrency       = 1
query_gpu_timeout_seconds   = 300
query_gpu_max_scale         = 1
query_gpu_min_scale         = 1
query_gpu_accelerator_count = 1
query_gpu_accelerator_type  = "nvidia-l4"
audit_image                 = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-audit:dev-20260202-211610"
workflow_image              = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-workflows:dev-20260209-170839"
chaos_image                 = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-workflows:dev-20260202-123333"
privacy_image               = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-workflows:dev-20260202-123333"
fleet_image                 = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-workflows:dev-20260202-123333"
data_factory_image          = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-workflows:dev-20260202-123333"
webhook_image               = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-workflows:dev-20260202-123333"
index_image                 = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-query:dev-20260214-144106-p2"
dev_console_image           = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-dev-console:dev-20260209-170839"
edge_gateway_image          = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-edge-gateway:dev-20260205-092607"
stream_ingest_image         = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-ingest:dev-20260214-115638-p1"
compaction_image            = "us-central1-docker.pkg.dev/simitor/retikon-repo/retikon-compaction:dev-20260202-123333"

api_gateway_config_name = "retikon-gateway-config-staging"
api_gateway_name = "retikon-gateway-staging"
api_gateway_region = "us-central1"
audit_service_account_name = "retikon-audit-sa-staging"
chaos_service_account_name = "retikon-chaos-sa-staging"
compaction_service_account_name = "retikon-compaction-staging"
data_factory_service_account_name = "retikon-data-factory-stg"
dev_console_service_account_name = "retikon-dev-console-sa-staging"
edge_gateway_service_account_name = "retikon-edge-gateway-staging"
fleet_service_account_name = "retikon-fleet-sa-staging"
index_service_account_name = "retikon-index-sa-staging"
ingestion_service_account_name = "retikon-ingest-sa-staging"
privacy_service_account_name = "retikon-privacy-sa-staging"
query_service_account_name = "retikon-query-sa-staging"
smoke_service_account_name = "retikon-smoke-sa-staging"
stream_ingest_service_account_name = "retikon-stream-ingest-staging"
stream_ingest_subscription_name = "retikon-stream-ingest-sub-staging"
stream_ingest_topic_name = "retikon-stream-ingest-staging"
webhook_service_account_name = "retikon-webhooks-sa-staging"
workflow_service_account_name = "retikon-workflows-sa-staging"


demo_datasets_json = <<EOT
{
  "datasets": [
    {
      "id": "safety-video",
      "title": "Safety Training Video",
      "modality": "video",
      "summary": "Keyframes, transcript highlights, and linked incidents.",
      "sample_query": "Where are the highest risk safety moments?",
      "preview_uri": "gs://retikon-raw-simitor-staging/raw/videos/demo-20260205/sample.mp4",
      "source_uri": "gs://retikon-raw-simitor-staging/raw/videos/demo-20260205/sample.mp4"
    },
    {
      "id": "support-audio",
      "title": "Customer Support Call",
      "modality": "audio",
      "summary": "Speaker turns, topic clusters, and sentiment cues.",
      "sample_query": "Summarize the top customer complaints.",
      "preview_uri": "gs://retikon-raw-simitor-staging/raw/audio/demo-20260205/sample.wav",
      "source_uri": "gs://retikon-raw-simitor-staging/raw/audio/demo-20260205/sample.wav"
    },
    {
      "id": "incident-docs",
      "title": "Security Incident Docs",
      "modality": "document",
      "summary": "Policy, log, and incident evidence stitched together.",
      "sample_query": "Which policies were violated in this incident?",
      "preview_uri": "gs://retikon-raw-simitor-staging/raw/docs/demo-20260205/sample.pdf",
      "source_uri": "gs://retikon-raw-simitor-staging/raw/docs/demo-20260205/sample.pdf"
    }
  ]
}
EOT
